{"ast":null,"code":"var _jsxFileName = \"D:\\\\XLR8\\\\Tech_Support_Ticket_Prioritizer\\\\web-ui\\\\src\\\\context\\\\ChatContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { useTickets } from './TicketsContext';\n\n// Create context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatContext = /*#__PURE__*/createContext();\n\n// Custom hook to use the chat context\nexport const useChat = () => {\n  _s();\n  return useContext(ChatContext);\n};\n\n// Knowledge base for the chatbot\n_s(useChat, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst KNOWLEDGE_BASE = {\n  greetings: [\"Hello! I'm your Syntax Samurai support assistant. How can I help you with your tech issue today?\", \"Hi there! I'm the Syntax Samurai AI assistant. What tech support do you need?\", \"Welcome to Syntax Samurai support! I'm here to assist with your technical questions.\"],\n  fallbacks: [\"I'm not sure I understand. Could you provide more details about your issue?\", \"I'd like to help, but I need more information. Could you elaborate on your problem?\", \"I'm having trouble understanding your request. Can you describe the issue differently?\"],\n  common_solutions: {\n    login: [\"If you're having login issues, try clearing your browser cache and cookies.\", \"For login problems, make sure Caps Lock is off and your username/password are correct.\", \"Try resetting your password using the 'Forgot Password' link on the login page.\"],\n    crash: [\"Application crashes are often resolved by restarting the application or your device.\", \"Try updating to the latest version of the software to fix crash issues.\", \"Check if your system meets the minimum requirements for running the application.\"],\n    performance: [\"Slow performance can be improved by closing other applications that consume resources.\", \"Try clearing temporary files and cache to improve performance.\", \"Consider upgrading your hardware if you're experiencing persistent performance issues.\"],\n    data_loss: [\"Check if there's an autosave feature that might have preserved your work.\", \"Look for backup files that may have been created automatically.\", \"In the future, consider enabling regular backups to prevent data loss.\"],\n    installation: [\"Make sure your system meets the minimum requirements before installation.\", \"Try running the installer as administrator if you're having permission issues.\", \"Temporarily disable antivirus software during installation if it's blocking the process.\"],\n    update: [\"Ensure you have a stable internet connection when updating.\", \"If updates fail, try downloading the update package directly from our website.\", \"Make sure you have enough disk space for the update to be installed.\"]\n  }\n};\nexport const ChatProvider = ({\n  children\n}) => {\n  _s2();\n  const {\n    user\n  } = useAuth();\n  const {\n    tickets,\n    submitTicket\n  } = useTickets();\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [connected, setConnected] = useState(true);\n  const [pendingTicket, setPendingTicket] = useState(null);\n\n  // Initial greeting message\n  useEffect(() => {\n    // Add initial bot message with slight delay to simulate bot thinking\n    const timer = setTimeout(() => {\n      const randomGreeting = KNOWLEDGE_BASE.greetings[Math.floor(Math.random() * KNOWLEDGE_BASE.greetings.length)];\n      setMessages([{\n        id: `welcome_${Date.now()}`,\n        text: randomGreeting,\n        sender: 'bot',\n        timestamp: new Date().toISOString()\n      }]);\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Analyze message to determine intent\n  const analyzeMessage = text => {\n    const lowerText = text.toLowerCase();\n\n    // Basic intent detection\n    let intent = 'general_query';\n    let category = 'query';\n    let priority = 'low';\n\n    // Check for login/authentication issues\n    if (lowerText.includes('login') || lowerText.includes('password') || lowerText.includes('sign in') || lowerText.includes('authentication') || lowerText.includes('account')) {\n      intent = 'login_issue';\n      category = 'bug';\n      priority = 'medium';\n    }\n\n    // Check for crashes/errors\n    else if (lowerText.includes('crash') || lowerText.includes('error') || lowerText.includes('freeze') || lowerText.includes('not working') || lowerText.includes('broken')) {\n      intent = 'crash_issue';\n      category = 'bug';\n      priority = 'high';\n\n      // Critical if affecting work or multiple users\n      if (lowerText.includes('everyone') || lowerText.includes('all users') || lowerText.includes('production') || lowerText.includes('can\\'t work') || lowerText.includes('lost work')) {\n        priority = 'critical';\n      }\n    }\n\n    // Check for performance issues\n    else if (lowerText.includes('slow') || lowerText.includes('performance') || lowerText.includes('lag') || lowerText.includes('takes forever') || lowerText.includes('loading')) {\n      intent = 'performance_issue';\n      category = 'bug';\n      priority = 'medium';\n    }\n\n    // Check for data loss\n    else if (lowerText.includes('lost data') || lowerText.includes('missing files') || lowerText.includes('deleted') || lowerText.includes('gone') || lowerText.includes('disappeared')) {\n      intent = 'data_loss';\n      category = 'bug';\n      priority = 'high';\n    }\n\n    // Check for installation issues\n    else if (lowerText.includes('install') || lowerText.includes('setup') || lowerText.includes('download') || lowerText.includes('update')) {\n      intent = 'installation_issue';\n      category = 'query';\n      priority = 'medium';\n    }\n\n    // Check for feature requests\n    else if (lowerText.includes('feature') || lowerText.includes('add') || lowerText.includes('would be nice') || lowerText.includes('should have') || lowerText.includes('could you implement')) {\n      intent = 'feature_request';\n      category = 'feature';\n      priority = 'low';\n    }\n\n    // Check for similar tickets\n    const similarTickets = tickets.filter(ticket => {\n      const ticketText = (ticket.subject + ' ' + ticket.text).toLowerCase();\n\n      // Check for keyword overlap\n      const words = lowerText.split(/\\s+/);\n      let matches = 0;\n      words.forEach(word => {\n        if (word.length > 3 && ticketText.includes(word)) {\n          matches++;\n        }\n      });\n      return matches >= 2; // At least 2 significant word matches\n    });\n    return {\n      intent,\n      category,\n      priority,\n      similarTickets: similarTickets.slice(0, 3) // Top 3 similar tickets\n    };\n  };\n\n  // Generate response based on analysis\n  const generateResponse = (analysis, userMessage) => {\n    const {\n      intent,\n      category,\n      priority,\n      similarTickets\n    } = analysis;\n\n    // Check if we have similar tickets\n    let response = \"\";\n    let suggestions = [];\n    let createTicket = false;\n    if (similarTickets.length > 0) {\n      response = \"I found some similar issues in our system. \";\n      if (similarTickets.some(t => t.status === 'resolved')) {\n        const resolvedTicket = similarTickets.find(t => t.status === 'resolved');\n        response += `We've actually resolved a similar issue before. The solution was related to \"${resolvedTicket.subject}\". `;\n      } else if (similarTickets.some(t => t.status === 'in_progress')) {\n        response += \"Our team is currently working on similar issues. \";\n      }\n    }\n\n    // Add intent-specific responses\n    switch (intent) {\n      case 'login_issue':\n        response += KNOWLEDGE_BASE.common_solutions.login[Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.login.length)];\n        suggestions = [\"Reset password\", \"Clear browser cache\", \"Try a different browser\"];\n        break;\n      case 'crash_issue':\n        response += KNOWLEDGE_BASE.common_solutions.crash[Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.crash.length)];\n        suggestions = [\"Restart application\", \"Update to latest version\", \"Check system requirements\"];\n        createTicket = priority === 'critical' || priority === 'high';\n        break;\n      case 'performance_issue':\n        response += KNOWLEDGE_BASE.common_solutions.performance[Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.performance.length)];\n        suggestions = [\"Close other applications\", \"Clear cache\", \"Check for updates\"];\n        break;\n      case 'data_loss':\n        response += KNOWLEDGE_BASE.common_solutions.data_loss[Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.data_loss.length)];\n        suggestions = [\"Check for backups\", \"Contact support team\", \"Try recovery tools\"];\n        createTicket = true;\n        break;\n      case 'installation_issue':\n        response += KNOWLEDGE_BASE.common_solutions.installation[Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.installation.length)];\n        suggestions = [\"Run as administrator\", \"Disable antivirus temporarily\", \"Check disk space\"];\n        break;\n      case 'feature_request':\n        response += \"Thanks for the feature suggestion! I've noted it down. We're always looking to improve our product based on user feedback.\";\n        suggestions = [\"Submit feature request\", \"Check roadmap\", \"Vote on features\"];\n        createTicket = true;\n        break;\n      default:\n        response += KNOWLEDGE_BASE.fallbacks[Math.floor(Math.random() * KNOWLEDGE_BASE.fallbacks.length)];\n        suggestions = [\"Contact support\", \"Browse documentation\", \"Submit a ticket\"];\n    }\n\n    // For high priority issues, suggest creating a ticket\n    if (priority === 'critical') {\n      response += \" This seems like a critical issue. I recommend creating a support ticket immediately.\";\n      createTicket = true;\n    }\n    return {\n      text: response,\n      category,\n      priority,\n      suggestions,\n      createTicket,\n      pendingTicket: createTicket ? {\n        subject: userMessage.slice(0, 50) + (userMessage.length > 50 ? '...' : ''),\n        text: userMessage,\n        category,\n        priority\n      } : null\n    };\n  };\n\n  // Send message to the chatbot\n  const sendMessage = async text => {\n    if (!text.trim()) return;\n\n    // Create message ID for tracking\n    const messageId = `msg_${Date.now()}`;\n\n    // Add user message to chat\n    const userMessage = {\n      id: messageId,\n      text,\n      sender: 'user',\n      timestamp: new Date().toISOString()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setLoading(true);\n    setError(null);\n    try {\n      // Analyze the message\n      const analysis = analyzeMessage(text);\n\n      // Generate a response\n      const response = generateResponse(analysis, text);\n\n      // Store pending ticket if needed\n      if (response.pendingTicket) {\n        setPendingTicket(response.pendingTicket);\n      }\n\n      // Add typing indicator\n      setMessages(prev => [...prev, {\n        id: 'typing',\n        text: '...',\n        sender: 'bot',\n        isTyping: true,\n        timestamp: new Date().toISOString()\n      }]);\n\n      // Simulate bot typing delay\n      setTimeout(() => {\n        // Add bot response\n        const botMessage = {\n          id: `resp_${Date.now()}`,\n          text: response.text,\n          sender: 'bot',\n          timestamp: new Date().toISOString(),\n          category: response.category,\n          priority: response.priority,\n          suggestions: response.suggestions\n        };\n        setMessages(prev => prev.filter(msg => !msg.isTyping).concat([botMessage]));\n        setLoading(false);\n\n        // If response suggests creating a ticket\n        if (response.createTicket) {\n          setTimeout(() => {\n            setMessages(prev => [...prev, {\n              id: `suggestion_${Date.now()}`,\n              text: \"Would you like me to create a support ticket for this issue?\",\n              sender: 'bot',\n              isTicketSuggestion: true,\n              timestamp: new Date().toISOString()\n            }]);\n          }, 1000);\n        }\n      }, 1500);\n    } catch (err) {\n      console.error('Chat processing error:', err);\n      setLoading(false);\n\n      // Remove typing indicator if present\n      setMessages(prev => prev.filter(msg => !msg.isTyping));\n\n      // Add fallback response message\n      const fallbackMessage = {\n        id: `error_${Date.now()}`,\n        text: \"I'm having trouble understanding your request. Could you try phrasing it differently?\",\n        sender: 'bot',\n        isError: true,\n        timestamp: new Date().toISOString()\n      };\n      setMessages(prev => [...prev, fallbackMessage]);\n    }\n  };\n\n  // Create ticket from chat\n  const createTicketFromChat = async () => {\n    if (!pendingTicket) return null;\n    try {\n      // Submit the ticket\n      const newTicket = await submitTicket(pendingTicket);\n\n      // Add confirmation message\n      setMessages(prev => [...prev, {\n        id: `ticket_${Date.now()}`,\n        text: `I've created ticket #${newTicket.ticket_id} for you. Our support team will look into this issue soon.`,\n        sender: 'bot',\n        timestamp: new Date().toISOString(),\n        isTicketConfirmation: true\n      }]);\n\n      // Clear pending ticket\n      setPendingTicket(null);\n      return newTicket;\n    } catch (err) {\n      console.error('Error creating ticket:', err);\n\n      // Add error message\n      setMessages(prev => [...prev, {\n        id: `error_${Date.now()}`,\n        text: \"I couldn't create a ticket right now. Please try again later or submit it manually.\",\n        sender: 'bot',\n        isError: true,\n        timestamp: new Date().toISOString()\n      }]);\n      return null;\n    }\n  };\n\n  // Clear chat history\n  const clearChat = () => {\n    const randomGreeting = KNOWLEDGE_BASE.greetings[Math.floor(Math.random() * KNOWLEDGE_BASE.greetings.length)];\n    setMessages([{\n      id: `welcome_${Date.now()}`,\n      text: randomGreeting,\n      sender: 'bot',\n      timestamp: new Date().toISOString()\n    }]);\n\n    // Reset pending ticket\n    setPendingTicket(null);\n  };\n\n  // Context value\n  const value = {\n    messages,\n    loading,\n    error,\n    connected,\n    sendMessage,\n    clearChat,\n    createTicketFromChat,\n    pendingTicket\n  };\n  return /*#__PURE__*/_jsxDEV(ChatContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 459,\n    columnNumber: 5\n  }, this);\n};\n_s2(ChatProvider, \"sog5p4/uKn9Nr5J9W+N8t0j4aBE=\", false, function () {\n  return [useAuth, useTickets];\n});\n_c = ChatProvider;\nvar _c;\n$RefreshReg$(_c, \"ChatProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","useAuth","useTickets","jsxDEV","_jsxDEV","ChatContext","useChat","_s","KNOWLEDGE_BASE","greetings","fallbacks","common_solutions","login","crash","performance","data_loss","installation","update","ChatProvider","children","_s2","user","tickets","submitTicket","messages","setMessages","loading","setLoading","error","setError","connected","setConnected","pendingTicket","setPendingTicket","timer","setTimeout","randomGreeting","Math","floor","random","length","id","Date","now","text","sender","timestamp","toISOString","clearTimeout","analyzeMessage","lowerText","toLowerCase","intent","category","priority","includes","similarTickets","filter","ticket","ticketText","subject","words","split","matches","forEach","word","slice","generateResponse","analysis","userMessage","response","suggestions","createTicket","some","t","status","resolvedTicket","find","sendMessage","trim","messageId","prev","isTyping","botMessage","msg","concat","isTicketSuggestion","err","console","fallbackMessage","isError","createTicketFromChat","newTicket","ticket_id","isTicketConfirmation","clearChat","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/XLR8/Tech_Support_Ticket_Prioritizer/web-ui/src/context/ChatContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport { useTickets } from './TicketsContext';\r\n\r\n// Create context\r\nconst ChatContext = createContext();\r\n\r\n// Custom hook to use the chat context\r\nexport const useChat = () => useContext(ChatContext);\r\n\r\n// Knowledge base for the chatbot\r\nconst KNOWLEDGE_BASE = {\r\n  greetings: [\r\n    \"Hello! I'm your Syntax Samurai support assistant. How can I help you with your tech issue today?\",\r\n    \"Hi there! I'm the Syntax Samurai AI assistant. What tech support do you need?\",\r\n    \"Welcome to Syntax Samurai support! I'm here to assist with your technical questions.\"\r\n  ],\r\n  fallbacks: [\r\n    \"I'm not sure I understand. Could you provide more details about your issue?\",\r\n    \"I'd like to help, but I need more information. Could you elaborate on your problem?\",\r\n    \"I'm having trouble understanding your request. Can you describe the issue differently?\"\r\n  ],\r\n  common_solutions: {\r\n    login: [\r\n      \"If you're having login issues, try clearing your browser cache and cookies.\",\r\n      \"For login problems, make sure Caps Lock is off and your username/password are correct.\",\r\n      \"Try resetting your password using the 'Forgot Password' link on the login page.\"\r\n    ],\r\n    crash: [\r\n      \"Application crashes are often resolved by restarting the application or your device.\",\r\n      \"Try updating to the latest version of the software to fix crash issues.\",\r\n      \"Check if your system meets the minimum requirements for running the application.\"\r\n    ],\r\n    performance: [\r\n      \"Slow performance can be improved by closing other applications that consume resources.\",\r\n      \"Try clearing temporary files and cache to improve performance.\",\r\n      \"Consider upgrading your hardware if you're experiencing persistent performance issues.\"\r\n    ],\r\n    data_loss: [\r\n      \"Check if there's an autosave feature that might have preserved your work.\",\r\n      \"Look for backup files that may have been created automatically.\",\r\n      \"In the future, consider enabling regular backups to prevent data loss.\"\r\n    ],\r\n    installation: [\r\n      \"Make sure your system meets the minimum requirements before installation.\",\r\n      \"Try running the installer as administrator if you're having permission issues.\",\r\n      \"Temporarily disable antivirus software during installation if it's blocking the process.\"\r\n    ],\r\n    update: [\r\n      \"Ensure you have a stable internet connection when updating.\",\r\n      \"If updates fail, try downloading the update package directly from our website.\",\r\n      \"Make sure you have enough disk space for the update to be installed.\"\r\n    ]\r\n  }\r\n};\r\n\r\nexport const ChatProvider = ({ children }) => {\r\n  const { user } = useAuth();\r\n  const { tickets, submitTicket } = useTickets();\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [connected, setConnected] = useState(true);\r\n  const [pendingTicket, setPendingTicket] = useState(null);\r\n\r\n  // Initial greeting message\r\n  useEffect(() => {\r\n    // Add initial bot message with slight delay to simulate bot thinking\r\n    const timer = setTimeout(() => {\r\n      const randomGreeting = KNOWLEDGE_BASE.greetings[\r\n        Math.floor(Math.random() * KNOWLEDGE_BASE.greetings.length)\r\n      ];\r\n      \r\n      setMessages([\r\n        {\r\n          id: `welcome_${Date.now()}`,\r\n          text: randomGreeting,\r\n          sender: 'bot',\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      ]);\r\n    }, 1000);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  // Analyze message to determine intent\r\n  const analyzeMessage = (text) => {\r\n    const lowerText = text.toLowerCase();\r\n    \r\n    // Basic intent detection\r\n    let intent = 'general_query';\r\n    let category = 'query';\r\n    let priority = 'low';\r\n    \r\n    // Check for login/authentication issues\r\n    if (\r\n      lowerText.includes('login') || \r\n      lowerText.includes('password') || \r\n      lowerText.includes('sign in') || \r\n      lowerText.includes('authentication') ||\r\n      lowerText.includes('account')\r\n    ) {\r\n      intent = 'login_issue';\r\n      category = 'bug';\r\n      priority = 'medium';\r\n    }\r\n    \r\n    // Check for crashes/errors\r\n    else if (\r\n      lowerText.includes('crash') || \r\n      lowerText.includes('error') || \r\n      lowerText.includes('freeze') || \r\n      lowerText.includes('not working') ||\r\n      lowerText.includes('broken')\r\n    ) {\r\n      intent = 'crash_issue';\r\n      category = 'bug';\r\n      priority = 'high';\r\n      \r\n      // Critical if affecting work or multiple users\r\n      if (\r\n        lowerText.includes('everyone') || \r\n        lowerText.includes('all users') || \r\n        lowerText.includes('production') || \r\n        lowerText.includes('can\\'t work') ||\r\n        lowerText.includes('lost work')\r\n      ) {\r\n        priority = 'critical';\r\n      }\r\n    }\r\n    \r\n    // Check for performance issues\r\n    else if (\r\n      lowerText.includes('slow') || \r\n      lowerText.includes('performance') || \r\n      lowerText.includes('lag') || \r\n      lowerText.includes('takes forever') ||\r\n      lowerText.includes('loading')\r\n    ) {\r\n      intent = 'performance_issue';\r\n      category = 'bug';\r\n      priority = 'medium';\r\n    }\r\n    \r\n    // Check for data loss\r\n    else if (\r\n      lowerText.includes('lost data') || \r\n      lowerText.includes('missing files') || \r\n      lowerText.includes('deleted') || \r\n      lowerText.includes('gone') ||\r\n      lowerText.includes('disappeared')\r\n    ) {\r\n      intent = 'data_loss';\r\n      category = 'bug';\r\n      priority = 'high';\r\n    }\r\n    \r\n    // Check for installation issues\r\n    else if (\r\n      lowerText.includes('install') || \r\n      lowerText.includes('setup') || \r\n      lowerText.includes('download') || \r\n      lowerText.includes('update')\r\n    ) {\r\n      intent = 'installation_issue';\r\n      category = 'query';\r\n      priority = 'medium';\r\n    }\r\n    \r\n    // Check for feature requests\r\n    else if (\r\n      lowerText.includes('feature') || \r\n      lowerText.includes('add') || \r\n      lowerText.includes('would be nice') || \r\n      lowerText.includes('should have') ||\r\n      lowerText.includes('could you implement')\r\n    ) {\r\n      intent = 'feature_request';\r\n      category = 'feature';\r\n      priority = 'low';\r\n    }\r\n    \r\n    // Check for similar tickets\r\n    const similarTickets = tickets.filter(ticket => {\r\n      const ticketText = (ticket.subject + ' ' + ticket.text).toLowerCase();\r\n      \r\n      // Check for keyword overlap\r\n      const words = lowerText.split(/\\s+/);\r\n      let matches = 0;\r\n      \r\n      words.forEach(word => {\r\n        if (word.length > 3 && ticketText.includes(word)) {\r\n          matches++;\r\n        }\r\n      });\r\n      \r\n      return matches >= 2; // At least 2 significant word matches\r\n    });\r\n    \r\n    return {\r\n      intent,\r\n      category,\r\n      priority,\r\n      similarTickets: similarTickets.slice(0, 3) // Top 3 similar tickets\r\n    };\r\n  };\r\n\r\n  // Generate response based on analysis\r\n  const generateResponse = (analysis, userMessage) => {\r\n    const { intent, category, priority, similarTickets } = analysis;\r\n    \r\n    // Check if we have similar tickets\r\n    let response = \"\";\r\n    let suggestions = [];\r\n    let createTicket = false;\r\n    \r\n    if (similarTickets.length > 0) {\r\n      response = \"I found some similar issues in our system. \";\r\n      \r\n      if (similarTickets.some(t => t.status === 'resolved')) {\r\n        const resolvedTicket = similarTickets.find(t => t.status === 'resolved');\r\n        response += `We've actually resolved a similar issue before. The solution was related to \"${resolvedTicket.subject}\". `;\r\n      } else if (similarTickets.some(t => t.status === 'in_progress')) {\r\n        response += \"Our team is currently working on similar issues. \";\r\n      }\r\n    }\r\n    \r\n    // Add intent-specific responses\r\n    switch (intent) {\r\n      case 'login_issue':\r\n        response += KNOWLEDGE_BASE.common_solutions.login[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.login.length)\r\n        ];\r\n        suggestions = [\"Reset password\", \"Clear browser cache\", \"Try a different browser\"];\r\n        break;\r\n        \r\n      case 'crash_issue':\r\n        response += KNOWLEDGE_BASE.common_solutions.crash[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.crash.length)\r\n        ];\r\n        suggestions = [\"Restart application\", \"Update to latest version\", \"Check system requirements\"];\r\n        createTicket = priority === 'critical' || priority === 'high';\r\n        break;\r\n        \r\n      case 'performance_issue':\r\n        response += KNOWLEDGE_BASE.common_solutions.performance[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.performance.length)\r\n        ];\r\n        suggestions = [\"Close other applications\", \"Clear cache\", \"Check for updates\"];\r\n        break;\r\n        \r\n      case 'data_loss':\r\n        response += KNOWLEDGE_BASE.common_solutions.data_loss[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.data_loss.length)\r\n        ];\r\n        suggestions = [\"Check for backups\", \"Contact support team\", \"Try recovery tools\"];\r\n        createTicket = true;\r\n        break;\r\n        \r\n      case 'installation_issue':\r\n        response += KNOWLEDGE_BASE.common_solutions.installation[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.common_solutions.installation.length)\r\n        ];\r\n        suggestions = [\"Run as administrator\", \"Disable antivirus temporarily\", \"Check disk space\"];\r\n        break;\r\n        \r\n      case 'feature_request':\r\n        response += \"Thanks for the feature suggestion! I've noted it down. We're always looking to improve our product based on user feedback.\";\r\n        suggestions = [\"Submit feature request\", \"Check roadmap\", \"Vote on features\"];\r\n        createTicket = true;\r\n        break;\r\n        \r\n      default:\r\n        response += KNOWLEDGE_BASE.fallbacks[\r\n          Math.floor(Math.random() * KNOWLEDGE_BASE.fallbacks.length)\r\n        ];\r\n        suggestions = [\"Contact support\", \"Browse documentation\", \"Submit a ticket\"];\r\n    }\r\n    \r\n    // For high priority issues, suggest creating a ticket\r\n    if (priority === 'critical') {\r\n      response += \" This seems like a critical issue. I recommend creating a support ticket immediately.\";\r\n      createTicket = true;\r\n    }\r\n    \r\n    return {\r\n      text: response,\r\n      category,\r\n      priority,\r\n      suggestions,\r\n      createTicket,\r\n      pendingTicket: createTicket ? {\r\n        subject: userMessage.slice(0, 50) + (userMessage.length > 50 ? '...' : ''),\r\n        text: userMessage,\r\n        category,\r\n        priority\r\n      } : null\r\n    };\r\n  };\r\n\r\n  // Send message to the chatbot\r\n  const sendMessage = async (text) => {\r\n    if (!text.trim()) return;\r\n    \r\n    // Create message ID for tracking\r\n    const messageId = `msg_${Date.now()}`;\r\n    \r\n    // Add user message to chat\r\n    const userMessage = {\r\n      id: messageId,\r\n      text,\r\n      sender: 'user',\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    setMessages(prev => [...prev, userMessage]);\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Analyze the message\r\n      const analysis = analyzeMessage(text);\r\n      \r\n      // Generate a response\r\n      const response = generateResponse(analysis, text);\r\n      \r\n      // Store pending ticket if needed\r\n      if (response.pendingTicket) {\r\n        setPendingTicket(response.pendingTicket);\r\n      }\r\n      \r\n      // Add typing indicator\r\n      setMessages(prev => [...prev, { \r\n        id: 'typing', \r\n        text: '...', \r\n        sender: 'bot', \r\n        isTyping: true,\r\n        timestamp: new Date().toISOString() \r\n      }]);\r\n      \r\n      // Simulate bot typing delay\r\n      setTimeout(() => {\r\n        // Add bot response\r\n        const botMessage = {\r\n          id: `resp_${Date.now()}`,\r\n          text: response.text,\r\n          sender: 'bot',\r\n          timestamp: new Date().toISOString(),\r\n          category: response.category,\r\n          priority: response.priority,\r\n          suggestions: response.suggestions\r\n        };\r\n        \r\n        setMessages(prev => prev.filter(msg => !msg.isTyping).concat([botMessage]));\r\n        setLoading(false);\r\n        \r\n        // If response suggests creating a ticket\r\n        if (response.createTicket) {\r\n          setTimeout(() => {\r\n            setMessages(prev => [...prev, {\r\n              id: `suggestion_${Date.now()}`,\r\n              text: \"Would you like me to create a support ticket for this issue?\",\r\n              sender: 'bot',\r\n              isTicketSuggestion: true,\r\n              timestamp: new Date().toISOString()\r\n            }]);\r\n          }, 1000);\r\n        }\r\n      }, 1500);\r\n      \r\n    } catch (err) {\r\n      console.error('Chat processing error:', err);\r\n      setLoading(false);\r\n      \r\n      // Remove typing indicator if present\r\n      setMessages(prev => prev.filter(msg => !msg.isTyping));\r\n      \r\n      // Add fallback response message\r\n      const fallbackMessage = {\r\n        id: `error_${Date.now()}`,\r\n        text: \"I'm having trouble understanding your request. Could you try phrasing it differently?\",\r\n        sender: 'bot',\r\n        isError: true,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      setMessages(prev => [...prev, fallbackMessage]);\r\n    }\r\n  };\r\n  \r\n  // Create ticket from chat\r\n  const createTicketFromChat = async () => {\r\n    if (!pendingTicket) return null;\r\n    \r\n    try {\r\n      // Submit the ticket\r\n      const newTicket = await submitTicket(pendingTicket);\r\n      \r\n      // Add confirmation message\r\n      setMessages(prev => [...prev, {\r\n        id: `ticket_${Date.now()}`,\r\n        text: `I've created ticket #${newTicket.ticket_id} for you. Our support team will look into this issue soon.`,\r\n        sender: 'bot',\r\n        timestamp: new Date().toISOString(),\r\n        isTicketConfirmation: true\r\n      }]);\r\n      \r\n      // Clear pending ticket\r\n      setPendingTicket(null);\r\n      \r\n      return newTicket;\r\n    } catch (err) {\r\n      console.error('Error creating ticket:', err);\r\n      \r\n      // Add error message\r\n      setMessages(prev => [...prev, {\r\n        id: `error_${Date.now()}`,\r\n        text: \"I couldn't create a ticket right now. Please try again later or submit it manually.\",\r\n        sender: 'bot',\r\n        isError: true,\r\n        timestamp: new Date().toISOString()\r\n      }]);\r\n      \r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Clear chat history\r\n  const clearChat = () => {\r\n    const randomGreeting = KNOWLEDGE_BASE.greetings[\r\n      Math.floor(Math.random() * KNOWLEDGE_BASE.greetings.length)\r\n    ];\r\n    \r\n    setMessages([{\r\n      id: `welcome_${Date.now()}`,\r\n      text: randomGreeting,\r\n      sender: 'bot',\r\n      timestamp: new Date().toISOString()\r\n    }]);\r\n    \r\n    // Reset pending ticket\r\n    setPendingTicket(null);\r\n  };\r\n\r\n  // Context value\r\n  const value = {\r\n    messages,\r\n    loading,\r\n    error,\r\n    connected,\r\n    sendMessage,\r\n    clearChat,\r\n    createTicketFromChat,\r\n    pendingTicket\r\n  };\r\n\r\n  return (\r\n    <ChatContext.Provider value={value}>\r\n      {children}\r\n    </ChatContext.Provider>\r\n  );\r\n}; "],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,UAAU,QAAQ,kBAAkB;;AAE7C;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;;AAEnC;AACA,OAAO,MAAMS,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMR,UAAU,CAACM,WAAW,CAAC;AAAA;;AAEpD;AAAAE,EAAA,CAFaD,OAAO;AAGpB,MAAME,cAAc,GAAG;EACrBC,SAAS,EAAE,CACT,kGAAkG,EAClG,+EAA+E,EAC/E,sFAAsF,CACvF;EACDC,SAAS,EAAE,CACT,6EAA6E,EAC7E,qFAAqF,EACrF,wFAAwF,CACzF;EACDC,gBAAgB,EAAE;IAChBC,KAAK,EAAE,CACL,6EAA6E,EAC7E,wFAAwF,EACxF,iFAAiF,CAClF;IACDC,KAAK,EAAE,CACL,sFAAsF,EACtF,yEAAyE,EACzE,kFAAkF,CACnF;IACDC,WAAW,EAAE,CACX,wFAAwF,EACxF,gEAAgE,EAChE,wFAAwF,CACzF;IACDC,SAAS,EAAE,CACT,2EAA2E,EAC3E,iEAAiE,EACjE,wEAAwE,CACzE;IACDC,YAAY,EAAE,CACZ,2EAA2E,EAC3E,gFAAgF,EAChF,0FAA0F,CAC3F;IACDC,MAAM,EAAE,CACN,6DAA6D,EAC7D,gFAAgF,EAChF,sEAAsE;EAE1E;AACF,CAAC;AAED,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGpB,OAAO,CAAC,CAAC;EAC1B,MAAM;IAAEqB,OAAO;IAAEC;EAAa,CAAC,GAAGrB,UAAU,CAAC,CAAC;EAC9C,MAAM,CAACsB,QAAQ,EAAEC,WAAW,CAAC,GAAG3B,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC4B,OAAO,EAAEC,UAAU,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC8B,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACgC,SAAS,EAAEC,YAAY,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACkC,aAAa,EAAEC,gBAAgB,CAAC,GAAGnC,QAAQ,CAAC,IAAI,CAAC;;EAExD;EACAE,SAAS,CAAC,MAAM;IACd;IACA,MAAMkC,KAAK,GAAGC,UAAU,CAAC,MAAM;MAC7B,MAAMC,cAAc,GAAG5B,cAAc,CAACC,SAAS,CAC7C4B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACC,SAAS,CAAC+B,MAAM,CAAC,CAC5D;MAEDf,WAAW,CAAC,CACV;QACEgB,EAAE,EAAE,WAAWC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QAC3BC,IAAI,EAAER,cAAc;QACpBS,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;MACpC,CAAC,CACF,CAAC;IACJ,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAMC,YAAY,CAACd,KAAK,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMe,cAAc,GAAIL,IAAI,IAAK;IAC/B,MAAMM,SAAS,GAAGN,IAAI,CAACO,WAAW,CAAC,CAAC;;IAEpC;IACA,IAAIC,MAAM,GAAG,eAAe;IAC5B,IAAIC,QAAQ,GAAG,OAAO;IACtB,IAAIC,QAAQ,GAAG,KAAK;;IAEpB;IACA,IACEJ,SAAS,CAACK,QAAQ,CAAC,OAAO,CAAC,IAC3BL,SAAS,CAACK,QAAQ,CAAC,UAAU,CAAC,IAC9BL,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,IAC7BL,SAAS,CAACK,QAAQ,CAAC,gBAAgB,CAAC,IACpCL,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,EAC7B;MACAH,MAAM,GAAG,aAAa;MACtBC,QAAQ,GAAG,KAAK;MAChBC,QAAQ,GAAG,QAAQ;IACrB;;IAEA;IAAA,KACK,IACHJ,SAAS,CAACK,QAAQ,CAAC,OAAO,CAAC,IAC3BL,SAAS,CAACK,QAAQ,CAAC,OAAO,CAAC,IAC3BL,SAAS,CAACK,QAAQ,CAAC,QAAQ,CAAC,IAC5BL,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,IACjCL,SAAS,CAACK,QAAQ,CAAC,QAAQ,CAAC,EAC5B;MACAH,MAAM,GAAG,aAAa;MACtBC,QAAQ,GAAG,KAAK;MAChBC,QAAQ,GAAG,MAAM;;MAEjB;MACA,IACEJ,SAAS,CAACK,QAAQ,CAAC,UAAU,CAAC,IAC9BL,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,IAC/BL,SAAS,CAACK,QAAQ,CAAC,YAAY,CAAC,IAChCL,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,IACjCL,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,EAC/B;QACAD,QAAQ,GAAG,UAAU;MACvB;IACF;;IAEA;IAAA,KACK,IACHJ,SAAS,CAACK,QAAQ,CAAC,MAAM,CAAC,IAC1BL,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,IACjCL,SAAS,CAACK,QAAQ,CAAC,KAAK,CAAC,IACzBL,SAAS,CAACK,QAAQ,CAAC,eAAe,CAAC,IACnCL,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,EAC7B;MACAH,MAAM,GAAG,mBAAmB;MAC5BC,QAAQ,GAAG,KAAK;MAChBC,QAAQ,GAAG,QAAQ;IACrB;;IAEA;IAAA,KACK,IACHJ,SAAS,CAACK,QAAQ,CAAC,WAAW,CAAC,IAC/BL,SAAS,CAACK,QAAQ,CAAC,eAAe,CAAC,IACnCL,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,IAC7BL,SAAS,CAACK,QAAQ,CAAC,MAAM,CAAC,IAC1BL,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,EACjC;MACAH,MAAM,GAAG,WAAW;MACpBC,QAAQ,GAAG,KAAK;MAChBC,QAAQ,GAAG,MAAM;IACnB;;IAEA;IAAA,KACK,IACHJ,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,IAC7BL,SAAS,CAACK,QAAQ,CAAC,OAAO,CAAC,IAC3BL,SAAS,CAACK,QAAQ,CAAC,UAAU,CAAC,IAC9BL,SAAS,CAACK,QAAQ,CAAC,QAAQ,CAAC,EAC5B;MACAH,MAAM,GAAG,oBAAoB;MAC7BC,QAAQ,GAAG,OAAO;MAClBC,QAAQ,GAAG,QAAQ;IACrB;;IAEA;IAAA,KACK,IACHJ,SAAS,CAACK,QAAQ,CAAC,SAAS,CAAC,IAC7BL,SAAS,CAACK,QAAQ,CAAC,KAAK,CAAC,IACzBL,SAAS,CAACK,QAAQ,CAAC,eAAe,CAAC,IACnCL,SAAS,CAACK,QAAQ,CAAC,aAAa,CAAC,IACjCL,SAAS,CAACK,QAAQ,CAAC,qBAAqB,CAAC,EACzC;MACAH,MAAM,GAAG,iBAAiB;MAC1BC,QAAQ,GAAG,SAAS;MACpBC,QAAQ,GAAG,KAAK;IAClB;;IAEA;IACA,MAAME,cAAc,GAAGlC,OAAO,CAACmC,MAAM,CAACC,MAAM,IAAI;MAC9C,MAAMC,UAAU,GAAG,CAACD,MAAM,CAACE,OAAO,GAAG,GAAG,GAAGF,MAAM,CAACd,IAAI,EAAEO,WAAW,CAAC,CAAC;;MAErE;MACA,MAAMU,KAAK,GAAGX,SAAS,CAACY,KAAK,CAAC,KAAK,CAAC;MACpC,IAAIC,OAAO,GAAG,CAAC;MAEfF,KAAK,CAACG,OAAO,CAACC,IAAI,IAAI;QACpB,IAAIA,IAAI,CAACzB,MAAM,GAAG,CAAC,IAAImB,UAAU,CAACJ,QAAQ,CAACU,IAAI,CAAC,EAAE;UAChDF,OAAO,EAAE;QACX;MACF,CAAC,CAAC;MAEF,OAAOA,OAAO,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,OAAO;MACLX,MAAM;MACNC,QAAQ;MACRC,QAAQ;MACRE,cAAc,EAAEA,cAAc,CAACU,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7C,CAAC;EACH,CAAC;;EAED;EACA,MAAMC,gBAAgB,GAAGA,CAACC,QAAQ,EAAEC,WAAW,KAAK;IAClD,MAAM;MAAEjB,MAAM;MAAEC,QAAQ;MAAEC,QAAQ;MAAEE;IAAe,CAAC,GAAGY,QAAQ;;IAE/D;IACA,IAAIE,QAAQ,GAAG,EAAE;IACjB,IAAIC,WAAW,GAAG,EAAE;IACpB,IAAIC,YAAY,GAAG,KAAK;IAExB,IAAIhB,cAAc,CAAChB,MAAM,GAAG,CAAC,EAAE;MAC7B8B,QAAQ,GAAG,6CAA6C;MAExD,IAAId,cAAc,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,UAAU,CAAC,EAAE;QACrD,MAAMC,cAAc,GAAGpB,cAAc,CAACqB,IAAI,CAACH,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,UAAU,CAAC;QACxEL,QAAQ,IAAI,gFAAgFM,cAAc,CAAChB,OAAO,KAAK;MACzH,CAAC,MAAM,IAAIJ,cAAc,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,aAAa,CAAC,EAAE;QAC/DL,QAAQ,IAAI,mDAAmD;MACjE;IACF;;IAEA;IACA,QAAQlB,MAAM;MACZ,KAAK,aAAa;QAChBkB,QAAQ,IAAI9D,cAAc,CAACG,gBAAgB,CAACC,KAAK,CAC/CyB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACG,gBAAgB,CAACC,KAAK,CAAC4B,MAAM,CAAC,CACzE;QACD+B,WAAW,GAAG,CAAC,gBAAgB,EAAE,qBAAqB,EAAE,yBAAyB,CAAC;QAClF;MAEF,KAAK,aAAa;QAChBD,QAAQ,IAAI9D,cAAc,CAACG,gBAAgB,CAACE,KAAK,CAC/CwB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACG,gBAAgB,CAACE,KAAK,CAAC2B,MAAM,CAAC,CACzE;QACD+B,WAAW,GAAG,CAAC,qBAAqB,EAAE,0BAA0B,EAAE,2BAA2B,CAAC;QAC9FC,YAAY,GAAGlB,QAAQ,KAAK,UAAU,IAAIA,QAAQ,KAAK,MAAM;QAC7D;MAEF,KAAK,mBAAmB;QACtBgB,QAAQ,IAAI9D,cAAc,CAACG,gBAAgB,CAACG,WAAW,CACrDuB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACG,gBAAgB,CAACG,WAAW,CAAC0B,MAAM,CAAC,CAC/E;QACD+B,WAAW,GAAG,CAAC,0BAA0B,EAAE,aAAa,EAAE,mBAAmB,CAAC;QAC9E;MAEF,KAAK,WAAW;QACdD,QAAQ,IAAI9D,cAAc,CAACG,gBAAgB,CAACI,SAAS,CACnDsB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACG,gBAAgB,CAACI,SAAS,CAACyB,MAAM,CAAC,CAC7E;QACD+B,WAAW,GAAG,CAAC,mBAAmB,EAAE,sBAAsB,EAAE,oBAAoB,CAAC;QACjFC,YAAY,GAAG,IAAI;QACnB;MAEF,KAAK,oBAAoB;QACvBF,QAAQ,IAAI9D,cAAc,CAACG,gBAAgB,CAACK,YAAY,CACtDqB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACG,gBAAgB,CAACK,YAAY,CAACwB,MAAM,CAAC,CAChF;QACD+B,WAAW,GAAG,CAAC,sBAAsB,EAAE,+BAA+B,EAAE,kBAAkB,CAAC;QAC3F;MAEF,KAAK,iBAAiB;QACpBD,QAAQ,IAAI,4HAA4H;QACxIC,WAAW,GAAG,CAAC,wBAAwB,EAAE,eAAe,EAAE,kBAAkB,CAAC;QAC7EC,YAAY,GAAG,IAAI;QACnB;MAEF;QACEF,QAAQ,IAAI9D,cAAc,CAACE,SAAS,CAClC2B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACE,SAAS,CAAC8B,MAAM,CAAC,CAC5D;QACD+B,WAAW,GAAG,CAAC,iBAAiB,EAAE,sBAAsB,EAAE,iBAAiB,CAAC;IAChF;;IAEA;IACA,IAAIjB,QAAQ,KAAK,UAAU,EAAE;MAC3BgB,QAAQ,IAAI,uFAAuF;MACnGE,YAAY,GAAG,IAAI;IACrB;IAEA,OAAO;MACL5B,IAAI,EAAE0B,QAAQ;MACdjB,QAAQ;MACRC,QAAQ;MACRiB,WAAW;MACXC,YAAY;MACZxC,aAAa,EAAEwC,YAAY,GAAG;QAC5BZ,OAAO,EAAES,WAAW,CAACH,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,IAAIG,WAAW,CAAC7B,MAAM,GAAG,EAAE,GAAG,KAAK,GAAG,EAAE,CAAC;QAC1EI,IAAI,EAAEyB,WAAW;QACjBhB,QAAQ;QACRC;MACF,CAAC,GAAG;IACN,CAAC;EACH,CAAC;;EAED;EACA,MAAMwB,WAAW,GAAG,MAAOlC,IAAI,IAAK;IAClC,IAAI,CAACA,IAAI,CAACmC,IAAI,CAAC,CAAC,EAAE;;IAElB;IACA,MAAMC,SAAS,GAAG,OAAOtC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;;IAErC;IACA,MAAM0B,WAAW,GAAG;MAClB5B,EAAE,EAAEuC,SAAS;MACbpC,IAAI;MACJC,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;IACpC,CAAC;IAEDtB,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEZ,WAAW,CAAC,CAAC;IAC3C1C,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF;MACA,MAAMuC,QAAQ,GAAGnB,cAAc,CAACL,IAAI,CAAC;;MAErC;MACA,MAAM0B,QAAQ,GAAGH,gBAAgB,CAACC,QAAQ,EAAExB,IAAI,CAAC;;MAEjD;MACA,IAAI0B,QAAQ,CAACtC,aAAa,EAAE;QAC1BC,gBAAgB,CAACqC,QAAQ,CAACtC,aAAa,CAAC;MAC1C;;MAEA;MACAP,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BxC,EAAE,EAAE,QAAQ;QACZG,IAAI,EAAE,KAAK;QACXC,MAAM,EAAE,KAAK;QACbqC,QAAQ,EAAE,IAAI;QACdpC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;;MAEH;MACAZ,UAAU,CAAC,MAAM;QACf;QACA,MAAMgD,UAAU,GAAG;UACjB1C,EAAE,EAAE,QAAQC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UACxBC,IAAI,EAAE0B,QAAQ,CAAC1B,IAAI;UACnBC,MAAM,EAAE,KAAK;UACbC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC,CAAC;UACnCM,QAAQ,EAAEiB,QAAQ,CAACjB,QAAQ;UAC3BC,QAAQ,EAAEgB,QAAQ,CAAChB,QAAQ;UAC3BiB,WAAW,EAAED,QAAQ,CAACC;QACxB,CAAC;QAED9C,WAAW,CAACwD,IAAI,IAAIA,IAAI,CAACxB,MAAM,CAAC2B,GAAG,IAAI,CAACA,GAAG,CAACF,QAAQ,CAAC,CAACG,MAAM,CAAC,CAACF,UAAU,CAAC,CAAC,CAAC;QAC3ExD,UAAU,CAAC,KAAK,CAAC;;QAEjB;QACA,IAAI2C,QAAQ,CAACE,YAAY,EAAE;UACzBrC,UAAU,CAAC,MAAM;YACfV,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;cAC5BxC,EAAE,EAAE,cAAcC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;cAC9BC,IAAI,EAAE,8DAA8D;cACpEC,MAAM,EAAE,KAAK;cACbyC,kBAAkB,EAAE,IAAI;cACxBxC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;YACpC,CAAC,CAAC,CAAC;UACL,CAAC,EAAE,IAAI,CAAC;QACV;MACF,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC,CAAC,OAAOwC,GAAG,EAAE;MACZC,OAAO,CAAC5D,KAAK,CAAC,wBAAwB,EAAE2D,GAAG,CAAC;MAC5C5D,UAAU,CAAC,KAAK,CAAC;;MAEjB;MACAF,WAAW,CAACwD,IAAI,IAAIA,IAAI,CAACxB,MAAM,CAAC2B,GAAG,IAAI,CAACA,GAAG,CAACF,QAAQ,CAAC,CAAC;;MAEtD;MACA,MAAMO,eAAe,GAAG;QACtBhD,EAAE,EAAE,SAASC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACzBC,IAAI,EAAE,uFAAuF;QAC7FC,MAAM,EAAE,KAAK;QACb6C,OAAO,EAAE,IAAI;QACb5C,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;MACpC,CAAC;MAEDtB,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEQ,eAAe,CAAC,CAAC;IACjD;EACF,CAAC;;EAED;EACA,MAAME,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI,CAAC3D,aAAa,EAAE,OAAO,IAAI;IAE/B,IAAI;MACF;MACA,MAAM4D,SAAS,GAAG,MAAMrE,YAAY,CAACS,aAAa,CAAC;;MAEnD;MACAP,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BxC,EAAE,EAAE,UAAUC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QAC1BC,IAAI,EAAE,wBAAwBgD,SAAS,CAACC,SAAS,4DAA4D;QAC7GhD,MAAM,EAAE,KAAK;QACbC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC,CAAC;QACnC+C,oBAAoB,EAAE;MACxB,CAAC,CAAC,CAAC;;MAEH;MACA7D,gBAAgB,CAAC,IAAI,CAAC;MAEtB,OAAO2D,SAAS;IAClB,CAAC,CAAC,OAAOL,GAAG,EAAE;MACZC,OAAO,CAAC5D,KAAK,CAAC,wBAAwB,EAAE2D,GAAG,CAAC;;MAE5C;MACA9D,WAAW,CAACwD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;QAC5BxC,EAAE,EAAE,SAASC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;QACzBC,IAAI,EAAE,qFAAqF;QAC3FC,MAAM,EAAE,KAAK;QACb6C,OAAO,EAAE,IAAI;QACb5C,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;MACpC,CAAC,CAAC,CAAC;MAEH,OAAO,IAAI;IACb;EACF,CAAC;;EAED;EACA,MAAMgD,SAAS,GAAGA,CAAA,KAAM;IACtB,MAAM3D,cAAc,GAAG5B,cAAc,CAACC,SAAS,CAC7C4B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG/B,cAAc,CAACC,SAAS,CAAC+B,MAAM,CAAC,CAC5D;IAEDf,WAAW,CAAC,CAAC;MACXgB,EAAE,EAAE,WAAWC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;MAC3BC,IAAI,EAAER,cAAc;MACpBS,MAAM,EAAE,KAAK;MACbC,SAAS,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACK,WAAW,CAAC;IACpC,CAAC,CAAC,CAAC;;IAEH;IACAd,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC;;EAED;EACA,MAAM+D,KAAK,GAAG;IACZxE,QAAQ;IACRE,OAAO;IACPE,KAAK;IACLE,SAAS;IACTgD,WAAW;IACXiB,SAAS;IACTJ,oBAAoB;IACpB3D;EACF,CAAC;EAED,oBACE5B,OAAA,CAACC,WAAW,CAAC4F,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAA7E,QAAA,EAChCA;EAAQ;IAAA+E,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACjF,GAAA,CAtZWF,YAAY;EAAA,QACNjB,OAAO,EACUC,UAAU;AAAA;AAAAoG,EAAA,GAFjCpF,YAAY;AAAA,IAAAoF,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}